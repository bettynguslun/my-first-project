<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Hotel Management System</title>
  <style>
    :root {
      --primary: #2d2d8a;
      --success: #27ae60;
      --danger: #e74c3c;
      --warning: #f39c12;
      --light: #ecf0f1;
      --dark: #2c3e50;
    }
    * { margin:0; padding:0; box-sizing:border-box; font-family: 'Segoe UI', sans-serif; }
    body { background:#f4f6f9; color:#333; }
    header {
      background:var(--primary);
      color:white;
      padding:1.5rem;
      text-align:center;
      box-shadow:0 2px 10px rgba(0,0,0,0.1);
    }
    nav {
      background:#fff;
      padding:1rem;
      box-shadow:0 2px 5px rgba(0,0,0,0.1);
      position:sticky;
      top:0;
      z-index:100;
    }
    nav ul {
      list-style:none;
      display:flex;
      justify-content:center;
      flex-wrap:wrap;
      gap:1rem;
    }
    nav a {
      color:var(--primary);
      text-decoration:none;
      padding:0.6rem 1.2rem;
      border-radius:5px;
      transition:0.3s;
      font-weight:600;
    }
    nav a:hover, nav a.active {
      background:var(--primary);
      color:white;
    }
    .container {
      max-width:1200px;
      margin:2rem auto;
      padding:0 1rem;
    }
    .grid {
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap:1.5rem;
      margin:2rem 0;
    }
    .card {
      background:white;
      padding:1.8rem;
      border-radius:10px;
      box-shadow:0 4px 15px rgba(0,0,0,0.1);
      text-align:center;
    }
    .card h3 { margin-bottom:1rem; color:var(--primary); }
    .card h1 { font-size:3rem; }
    .btn {
      padding:0.6rem 1.2rem;
      border:none;
      border-radius:5px;
      cursor:pointer;
      font-weight:bold;
      transition:0.3s;
      margin:0.3rem;
    }
    .btn-primary { background:var(--primary); color:white; }
    .btn-success { background:var(--success); color:white; }
    .btn-danger { background:var(--danger); color:white; }
    .btn-warning { background:var(--warning); color:white; }
    .btn-sm { padding:0.4rem 0.8rem; font-size:0.85rem; }
    .btn:hover { opacity:0.9; transform:translateY(-2px); }
    table {
      width:100%;
      border-collapse:collapse;
      margin:1.5rem 0;
    }
    th, td {
      padding:1rem;
      text-align:left;
      border-bottom:1px solid #ddd;
    }
    th { background:#f8f9fa; font-weight:600; }
    tr:hover { background:#f9f9f9; }
    .status {
      padding:0.4rem 0.9rem;
      border-radius:20px;
      font-size:0.85rem;
      font-weight:bold;
    }
    .status-available { background:#d5f5e3; color:#27ae60; }
    .status-occupied { background:#fadbd8; color:#e74c3c; }
    .status-cleaning { background:#fef9e1; color:#f39c12; }
    .status-confirmed { background:#d6eaf8; color:#2980b9; }
    .status-checked-in { background:#fadbd8; color:#e74c3c; }
    .status-checked-out { background:#eafaf1; color:#27ae60; }
    .form-group {
      margin-bottom:1.2rem;
    }
    label {
      display:block;
      margin-bottom:0.5rem;
      font-weight:600;
    }
    input, select {
      width:100%;
      padding:0.7rem;
      border:1px solid #ddd;
      border-radius:5px;
      font-size:1rem;
    }
    .hidden { display:none; }
    .modal {
      position:fixed;
      top:0; left:0; right:0; bottom:0;
      background:rgba(0,0,0,0.6);
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:1000;
    }
    .modal-content {
      background:white;
      padding:2rem;
      border-radius:10px;
      width:90%;
      max-width:500px;
      max-height:90vh;
      overflow-y:auto;
    }
    @media (max-width: 768px) {
      .grid { grid-template-columns:1fr; }
      nav ul { flex-direction:column; }
    }
  </style>
</head>
<body>

<header>
  <h1>üè® Grand Palace Hotel - Management System</h1>
</header>

<nav>
  <ul>
    <li><a href="#" class="active" data-page="dashboard">Dashboard</a></li>
    <li><a href="#" data-page="rooms">Rooms</a></li>
    <li><a href="#" data-page="bookings">Bookings</a></li>
    <li><a href="#" data-page="guests">Guests</a></li>
  </ul>
</nav>

<div class="container">

  <!-- Dashboard -->
  <div id="dashboard">
    <h2>Dashboard Overview</h2>
    <div class="grid">
      <div class="card">
        <h3>Total Rooms</h3>
        <h1 id="totalRooms">0</h1>
      </div>
      <div class="card">
        <h3>Available</h3>
        <h1 id="availableRooms" style="color:var(--success)">0</h1>
      </div>
      <div class="card">
        <h3>Occupied</h3>
        <h1 id="occupiedRooms" style="color:var(--danger)">0</h1>
      </div>
      <div class="card">
        <h3>Today's Check-ins</h3>
        <h1 id="todayBookings">0</h1>
      </div>
    </div>
  </div>

  <!-- Rooms -->
  <div id="rooms" class="hidden">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1.5rem; flex-wrap:wrap;">
      <h2>Room Management</h2>
      <button class="btn btn-primary" onclick="openRoomModal()">+ Add New Room</button>
    </div>
    <div class="card">
      <table id="roomsTable">
        <thead>
          <tr>
            <th>Room No</th>
            <th>Type</th>
            <th>Price/Night</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <!-- Bookings -->
  <div id="bookings" class="hidden">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem; flex-wrap:wrap; gap:1rem;">
      <h2>Bookings</h2>
      <div>
        <input type="text" id="searchBooking" placeholder="üîç Search by guest or room..." style="padding:0.7rem; width:250px; max-width:100%;">
        <button class="btn btn-success" onclick="openBookingModal()">+ New Booking</button>
      </div>
    </div>
    <div class="card">
      <table id="bookingsTable">
        <thead>
          <tr>
            <th>ID</th>
            <th>Guest</th>
            <th>Room</th>
            <th>Check In</th>
            <th>Check Out</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <!-- Guests -->
  <div id="guests" class="hidden">
    <h2>Current Guests (Checked In)</h2>
    <div class="card">
      <table id="guestsTable">
        <thead>
          <tr>
            <th>Name</th>
            <th>Phone</th>
            <th>Email</th>
            <th>Room</th>
            <th>Check In</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

</div>

<!-- Room Modal -->
<div id="roomModal" class="modal hidden">
  <div class="modal-content">
    <h3 id="roomModalTitle">Add New Room</h3>
    <form id="roomForm">
      <input type="hidden" id="roomId">
      <div class="form-group">
        <

      <label>Room Number</label>
        <input type="text" id="roomNumber" required placeholder="e.g. 101">
      </div>
      <div class="form-group">
        <label>Room Type</label>
        <select id="roomType" required>
          <option value="Single">Single</option>
          <option value="Double">Double</option>
          <option value="Suite">Suite</option>
          <option value="Deluxe">Deluxe</option>
        </select>
      </div>
      <div class="form-group">
        <label>Price per Night ($)</label>
        <input type="number" id="roomPrice" required min="1" placeholder="150">
      </div>
      <div style="display:flex; gap:1rem; margin-top:1.5rem;">
        <button type="submit" class="btn btn-primary">Save Room</button>
        <button type="button" class="btn btn-danger" onclick="closeModal('roomModal')">Cancel</button>
      </div>
    </form>
  </div>
</div>

<!-- Booking Modal -->
<div id="bookingModal" class="modal hidden">
  <div class="modal-content">
    <h3>New Booking</h3>
    <form id="bookingForm">
      <div class="form-group">
        <label>Guest Name</label>
        <input type="text" id="guestName" required>
      </div>
      <div class="form-group">
        <label>Phone</label>
        <input type="text" id="guestPhone" required>
      </div>
      <div class="form-group">
        <label>Email (optional)</label>
        <input type="email" id="guestEmail">
      </div>
      <div class="form-group">
        <label>Room</label>
        <select id="bookingRoom" required></select>
      </div>
      <div class="form-group">
        <label>Check In</label>
        <input type="date" id="checkIn" required>
      </div>
      <div class="form-group">
        <label>Check Out</label>
        <input type="date" id="checkOut" required>
      </div>
      <div style="display:flex; gap:1rem; margin-top:1.5rem;">
        <button type="submit" class="btn btn-success">Create Booking</button>
        <button type="button" class="btn btn-danger" onclick="closeModal('bookingModal')">Cancel</button>
      </div>
    </form>
  </div>
</div>

<script>
// Local Storage
const storage = {
  get: (key) => JSON.parse(localStorage.getItem(key)) || [],
  set: (key, value) => localStorage.setItem(key, JSON.stringify(value))
};

let rooms = storage.get('rooms');
let bookings = storage.get('bookings');
let bookingIdCounter = parseInt(localStorage.getItem('bookingIdCounter')) || 1001;

// Navigation
document.querySelectorAll('nav a').forEach(link => {
  link.addEventListener('click', (e) => {
    e.preventDefault();
    document.querySelectorAll('nav a').forEach(a => a.classList.remove('active'));
    link.classList.add('active');
    document.querySelectorAll('#dashboard, #rooms, #bookings, #guests').forEach(sec => sec.classList.add('hidden'));
    document.getElementById(link.dataset.page).classList.remove('hidden');
    
    if (link.dataset.page === 'dashboard') updateDashboard();
    if (link.dataset.page === 'rooms') renderRooms();
    if (link.dataset.page === 'bookings') renderBookings();
    if (link.dataset.page === 'guests') renderGuests();
  });
});

// Modal Controls
function closeModal(id) {
  document.getElementById(id).classList.add('hidden');
  document.querySelectorAll('form').forEach(f => f.reset());
  document.getElementById('roomId').value = '';
}
function openRoomModal(room = null) {
  document.getElementById('roomModalTitle').textContent = room ? 'Edit Room' : 'Add New Room';
  if (room) {
    document.getElementById('roomId').value = room.number;
    document.getElementById('roomNumber').value = room.number;
    document.getElementById('roomType').value = room.type;
    document.getElementById('roomPrice').value = room.price;
  }
  document.getElementById('roomModal').classList.remove('hidden');
}
function openBookingModal() {
  populateRoomSelect();
  document.getElementById('bookingModal').classList.remove('hidden');
}

// Close modal when clicking outside
document.querySelectorAll('.modal').forEach(m => {
  m.addEventListener('click', (e) => {
    if (e.target.classList.contains('modal')) closeModal(e.target.id);
  });
});

// Rooms
function renderRooms() {
  const tbody = document.querySelector('#roomsTable tbody');
  tbody.innerHTML = '';
  rooms.forEach(room => {
    const occupied = bookings.some(b => b.room === room.number && b.status === 'Checked In');
    const status = occupied ? 'Occupied' : 'Available';
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${room.number}</td>
      <td>${room.type}</td>
      <td>$${room.price}</td>
      <td><span class="status status-${status.toLowerCase()}">${status}</span></td>
      <td>
        <button class="btn btn-warning btn-sm" onclick='openRoomModal(${JSON.stringify(room)})'>Edit</button>
        <button class="btn btn-danger btn-sm" onclick="deleteRoom('${room.number}')">Delete</button>
      </td>
    `;
    tbody.appendChild(tr);
  });
  updateDashboard();
}

function deleteRoom(number) {
  if (confirm(`Delete room ${number}?`)) {
    rooms = rooms.filter(r => r.number !== number);
    storage.set('rooms', rooms);
    renderRooms();
  }
}

document.getElementById('roomForm').onsubmit = (e) => {
  e.preventDefault();
  const id = document.getElementById('roomId').value;
  const room = {
    number: document.getElementById('roomNumber').value.trim(),
    type: document.getElementById('roomType').value,
    price: document.getElementById('roomPrice').value
  };
  if (id) {
    rooms = rooms.map(r => r.number === id ? room : r);
  } else {
    if (rooms.some(r => r.number === room.number)) {
      alert('Room number already exists!');
      return;
    }
    rooms.push(room);
  }
  storage.set('rooms', rooms);
  closeModal('roomModal');
  renderRooms();
};

// Bookings
function populateRoomSelect() {
  const select = document.getElementById('bookingRoom');
  select.innerHTML = '<option value="">-- Select Available Room --</option>';
  const available = rooms.filter(r => !bookings.some(b => b.room === r.number && b.status === 'Checked In'));
  available.forEach(room => {
    const opt = new Option(`${room.number} (${room.type} - $${room.price}/night)`, room.number);
    select.add(opt);
  });
}

document.getElementById('bookingForm').onsubmit = (e) => {
  e.preventDefault();
  const today = new Date().toISOString().split('T')[0];
  const checkIn = document.getElementById('checkIn').value;
  
  const booking = {
    id: bookingIdCounter++,
    guestName: document.getElementById('guestName').value.trim(),
    guestPhone: document.getElementById('guestPhone').value.trim(),
    guestEmail: document.getElementById('guestEmail').value.trim(),
    room: document.getElementById('bookingRoom').value,
    checkIn,
    checkOut: document.getElementById('checkOut').value,
    status: checkIn <= today ? 'Checked In' : 'Confirmed'
  };
  
  bookings.push(booking);
  storage.set('bookings', bookings);
  localStorage.setItem('bookingIdCounter', bookingIdCounter);
  closeModal('bookingModal');
  renderBookings();
  renderGuests();
};

function renderBookings() {
  const tbody = document.querySelector('#bookingsTable tbody');
  tbody.innerHTML = '';
  const today = new Date().toISOString().split('T')[0];
  
  bookings.sort((a,b) => b.id - a.id);
  
  bookings.forEach(b => {
    if (b.status === 'Confirmed' && b.checkIn <= today) b.status = 'Checked In';
    
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>#${b.id}</td>
      <td>${b.guestName}</td>
      <td>${b.room}</td>
      <td>${b.checkIn}</td>
      <td>${b.checkOut}</td>
      <td><span class="status status-${b.status.toLowerCase().replace(' ','-')}">${b.status}</span></td>
      <td>
        ${b.status === 'Confirmed' ? `<button class="btn btn-primary btn-sm" onclick="checkIn(${b.id})">Check In</button>` : ''}
        ${b.status === 'Checked In' ? `<button class="btn btn-success btn-sm" onclick="checkOut(${b.id})">Check Out</button>` : ''}
      </td>
    `;
    tbody.appendChild(tr);
  });
  updateDashboard();
}

function checkIn(id) {
  bookings = bookings.map(b => b.id === id ? {...b, status: 'Checked In'} : b);
  storage.set('bookings', bookings);
  renderBookings();
  renderGuests();
}

function checkOut(id) {
  if (confirm('Confirm check-out?')) {
    bookings = bookings.map(b => b.id === id ? {...b, status: 'Checked Out'} : b);
    storage.set('bookings', bookings);
    renderBookings();
    renderGuests();
  }
}

document.getElementById('searchBooking').onkeyup = () => {
  const term = document.getElementById('searchBooking').value.toLowerCase();
  document.querySelectorAll('#bookingsTable tbody tr').forEach(row => {
    row.style.display = row.textContent.toLowerCase().includes(term) ? '' : 'none';
  });
};

// Guests
function renderGuests() {
  const tbody = document.querySelector('#guestsTable tbody');
  tbody.innerHTML = '';
  bookings.filter(b => b.status === 'Checked In').forEach(b => {
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${b.guestName}</td>
      <td>${b.guestPhone}</td>
      <td>${b.guestEmail || '-'}</td>
      <td>${b.room}</td>
      <td>${b.checkIn}</td>
    `;
    tbody.appendChild(tr);
  });
}

// Dashboard
function updateDashboard() {
  const total = rooms.length;
  const occupied = bookings.filter(b => b.status === 'Checked In').length;
  const available = total - occupied;
  const today = new Date().toISOString().split('T')[0];
  const todayCheckins = bookings.filter(b => b.checkIn === today).length;

  document.getElementById('totalRooms').textContent = total;
  document.getElementById('availableRooms').textContent = available;
  document.getElementById('occupiedRooms').textContent = occupied;
  document.getElementById('todayBookings').textContent = todayCheckins;
}

// Init
updateDashboard();
renderRooms();
renderBookings();
renderGuests();

</script>
</body>
</html>